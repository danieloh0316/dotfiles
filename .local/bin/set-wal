#!/bin/sh

WALLPAPERS_PATH="$XDG_CONFIG_HOME/wallpapers"

set_wal() {
  # seperate into two commands in order to use --no-fehbg flag
  wal -nqi "$WALLPAPERS_PATH/$1"
  feh --bg-fill --no-fehbg "$(< "${HOME}/.cache/wal/wal")"
}

pick_wal() {
  OPTION=$(ls "$WALLPAPERS_PATH" | rofi -dmenu) || exit
  [ -f "$WALLPAPERS_PATH/$OPTION" ] && setwal $OPTION
}

case $1 in
  -r) set_wal;;
  *) pick_wal;;
esac
